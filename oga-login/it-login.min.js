"use strict";$(function(){$("body").find("button[type=button]").click(function(){authForm.authenticate()}),$("body").find("button[type=reset]").click(function(){authForm.formReset()}),authForm.formSet(),authForm.checkAuth()});let authForm={checkAuth:function(){this.showLoader();let e=this.getToken();this.checkNull(e)&&this.getUserDetail(e,this.ak),this.hideLoader()},auth_url:"http://organogold-dts.myvoffice.com/organogold/index.cfm?service=Session.login&apikey=[ak]&DTSPASSWORD=[pw]&DTSUSERID=[ds]&format=json",authenticate:function(){this.showLoader();let e=this.ak,o=$("input[name=idistributor]").val(),t=$("input[name=ipassword]").val(),s=this.auth_url.replace("[ak]",e).replace("[ds]",o).replace("[pw]",t);console.log("auth_url: ",s),this.validate()&&(jQuery.support.cors=!0,$.ajax({url:s,type:"GET",dataType:"text",success:function(o,t,s){console.log("data: ",o),console.log("response: ",t),console.log("request: ",s);let a={SESSION:"aaba56ac-de0c-46b8-8dbc-02ea55f0218c",LOAD:1,ROLES:"distributor"};if(authForm.checkNotNull(a)){let o=JSON.stringify(a),t=JSON.parse(o);if(!authForm.checkNotNullString(t.SESSION))return authForm.deleteToken(),void(authForm.checkNotNull(t.DETAIL)?authForm.showMessage(t.DETAIL):authForm.showMessage("Invalid User Info"));authForm.setToken(t.SESSION),authForm.getUserByToken(t.SESSION,e)}authForm.hideLoader()},error:function(e,o,t){console.log("Error: ",e,o,t),authForm.checkNotNull(e)&&401===e.status?$(".div-message").text("You are not authorized"):$(".div-message").text("Something went wrong. Unable to fetch data."),authForm.hideLoader()}}))},user_url:"http://organogold-dts.myvoffice.com/organogold/index.cfm?jsessionid=[token]&service=Genealogy.distInfoBySavedQuery&apikey=[ak]&QRYID=DistConfData&DISTID=[di]&APPNAME=Admin&GROUP=Reports&format=JSON&fwreturnlog=1",getUserByToken:function(e,o){console.log("token: ",e);let t=this.user_url.replace("[ak]",o).replace("[di]",this.di).replace("[token]",e);console.log("getUserDetail(): ",t),jQuery.support.cors=!0,$.ajax({url:t,type:"GET",dataType:"text",success:function(e,o,t){console.log("data: ",e),console.log("response: ",o),console.log("request: ",t);let s={ROWCOUNT:1,COLUMNS:["NAME","CITY","STATE","CELL_PHONE","HOME_PHONE","NAME2","EMAIL","STATUS","END_RANK","COU"],DATA:{NAME:["ENTERPRISES SRL, SHANE MORAND"],CITY:["Santa Ana"],STATE:["SJ"],CELL_PHONE:["18888453990"],HOME_PHONE:["18888453990"],NAME2:[""],EMAIL:["info@shanemorand.com"],STATUS:["D"],END_RANK:["15"],COU:["CAN"]}};if(authForm.checkNotNull(s)){let e=JSON.stringify(s),o=JSON.parse(e);if(console.log("parsedObj.COLUMNS: ",o.COLUMNS),!authForm.checkNotNull(o.COLUMNS))return authForm.deleteToken(),void(authForm.checkNotNull(o.DETAIL)?authForm.showMessage(o.DETAIL):authForm.showMessage("Invalid User Info"));console.log("VALIDATED")}authForm.hideLoader()},error:function(e,o,t){console.log("Error: ",e,o,t),authForm.checkNotNull(e)&&401===e.status?$(".div-message").text("You are not authorized"):$(".div-message").text("Something went wrong. Unable to fetch data."),authForm.hideLoader()}})},showMessage:function(e){this.checkNull(e)?($("div.message").html(e),$("div.message").removeClass("hidden"),this.hideLoader()):($("div.message").html(""),$("div.message").addClass("hidden"))},validate:function(){let e="",o=!0,t=$("input[name=idistributor]").val(),s=$("input[name=ipassword]").val();return this.checkNotNullString(t)&&(o=!1,e+="Distributor ID is required<br/>",$("input[name=idistributor]").parent().parent(".form-group").addClass("has-error")),this.checkNotNullString(s)&&(o=!1,e+="Password is required<br/>",$("input[name=ipassword]").parent().parent(".form-group").addClass("has-error")),this.showMessage(e),o},formReset:function(){$("input[name=idistributor]").parent().parent(".form-group").removeClass("has-error"),$("input[name=ipassword]").parent().parent(".form-group").removeClass("has-error"),this.showMessage()},_ak:"_xak__",ak:()=>cookie.DecodeString(cookie.getCookie(this._ak)),_di:"_xdi__",di:()=>cookie.DecodeString(cookie.getCookie(this._di)),_tn:"_xtn__",setToken:e=>{cookie.setCookie(this._tn,e,cookie.addHours(cookie.today(),12))},getToken:()=>cookie.getCookie(this._tn),deleteToken:()=>{cookie.deleteCookie(this._tn)},formSet:function(){cookie.setCookie(this._ak,cookie.EncodeString("O3962162"),cookie.addHours(cookie.today(),12)),cookie.setCookie(this._di,cookie.EncodeString("1000101"),cookie.addHours(cookie.today(),12))},showLoader:function(){$("body").find("button[type=button]").addClass("disabled"),$("body").find("input[name=idistributor]").addClass("disabled"),$("body").find("input[name=ipassword]").addClass("disabled"),$(".loading-results").removeClass("hide")},hideLoader:function(){$("body").find("button[type=button]").removeClass("disabled"),$("body").find("input[name=idistributor]").removeClass("disabled"),$("body").find("input[name=ipassword]").removeClass("disabled"),$(".loading-results").addClass("hide")},checkNotNull:e=>Boolean(void 0!==e&&null!=e&&e.trim().length>0),checkNotNullString:e=>this.checkNull(e)&&Boolean(data.trim().length>0)};